---
slug: make-colons-and-paths-a-journey-through-hell
fulldate: Thu Aug 09 2012 13:08:49 GMT-0500 (CDT)
tags:
title:  Fuck Make
id: 29063747477
link: http://anthonymcook.com/post/29063747477/make-colons-and-paths-a-journey-through-hell
raw: {"blog_name":"anthonymcook","id":29063747477,"post_url":"http://anthonymcook.com/post/29063747477/make-colons-and-paths-a-journey-through-hell","slug":"make-colons-and-paths-a-journey-through-hell","type":"text","date":"2012-08-09 18:08:49 GMT","timestamp":1344535729,"state":"published","format":"markdown","reblog_key":"VZzuCOuH","tags":[],"short_url":"http://tmblr.co/Z8I8zxR4LPUL","summary":"Make, Colons, and Paths: A Journey Through Hell","recommended_source":null,"recommended_color":null,"highlighted":[],"note_count":0,"title":"Make, Colons, and Paths: A Journey Through Hell","body":"<h2>tl;dr: If you use timestamps on your deploys, make sure they don&rsquo;t contain colons or anything using <code>make</code> will explode.</h2>\n\n<p>We were running into this error while running <code>bundle install</code> on Ubuntu:</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb \nchecking for ffi.h... no\nchecking for ffi.h in /usr/local/include... no\nchecking for rb_thread_blocking_region()... yes\nchecking for ruby_native_thread_p()... yes\nchecking for rb_thread_call_with_gvl()... yes\ncreating extconf.h\ncreating Makefile\n\nmake\nMakefile:158: *** target pattern contains no `%'.  Stop.\n</code></pre>\n\n<p>The confusing part was when we ran <code>gem install ffi</code> it ran without a problem.\nGoogling around told us nothing about why ffi would be failing to build.</p>\n\n<p>We had run across <a href=\"http://lists.trolltech.com/qt-interest/2005-02/thread01024-0.html\" target=\"_blank\">a post about QT</a> where a similar error was encountered.</p>\n\n<p>Then I found a <a href=\"http://stackoverflow.com/questions/2052406/escaping-colons-in-filenames-in-a-makefile\" target=\"_blank\">StackOverflow question</a> which references <a href=\"http://www.mail-archive.com/bug-make@gnu.org/msg03318.html\" target=\"_blank\">a GNU mailing list thread</a> that explains the complete impossibility of <code>make</code> being able to parse a Makefile containing colons.</p>\n\n<p>It turns out we <em>did</em> have colons in the filename: We were using %T in the timestamps on our integration server, thus <code>make</code> was choking.</p>\n\n<p>The fix was simple, we just replaced the %T with a non-colon-delimited time string and everything worked just fine.</p>\n\n<p>Done!</p>\n\n<p>:A</p>","reblog":{"tree_html":"","comment":"<p><h2>tl;dr: If you use timestamps on your deploys, make sure they don’t contain colons or anything using <code>make</code> will explode.</h2>\n\n<p>We were running into this error while running <code>bundle install</code> on Ubuntu:</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb \nchecking for ffi.h... no\nchecking for ffi.h in /usr/local/include... no\nchecking for rb_thread_blocking_region()... yes\nchecking for ruby_native_thread_p()... yes\nchecking for rb_thread_call_with_gvl()... yes\ncreating extconf.h\ncreating Makefile\n\nmake\nMakefile:158: *** target pattern contains no `%'.  Stop.\n</code></pre>\n\n<p>The confusing part was when we ran <code>gem install ffi</code> it ran without a problem.\nGoogling around told us nothing about why ffi would be failing to build.</p>\n\n<p>We had run across <a href=\"http://lists.trolltech.com/qt-interest/2005-02/thread01024-0.html\" target=\"_blank\">a post about QT</a> where a similar error was encountered.</p>\n\n<p>Then I found a <a href=\"http://stackoverflow.com/questions/2052406/escaping-colons-in-filenames-in-a-makefile\" target=\"_blank\">StackOverflow question</a> which references <a href=\"http://www.mail-archive.com/bug-make@gnu.org/msg03318.html\" target=\"_blank\">a GNU mailing list thread</a> that explains the complete impossibility of <code>make</code> being able to parse a Makefile containing colons.</p>\n\n<p>It turns out we <em>did</em> have colons in the filename: We were using %T in the timestamps on our integration server, thus <code>make</code> was choking.</p>\n\n<p>The fix was simple, we just replaced the %T with a non-colon-delimited time string and everything worked just fine.</p>\n\n<p>Done!</p>\n\n<p>:A</p></p>"},"trail":[{"blog":{"name":"anthonymcook","active":true,"theme":{"avatar_shape":"circle","background_color":"#FAFAFA","body_font":"Helvetica Neue","header_bounds":"","header_image":"https://secure.assets.tumblr.com/images/default_header/optica_pattern_05.png?_v=671444c5f47705cce40d8aefd23df3b1","header_image_focused":"https://secure.assets.tumblr.com/images/default_header/optica_pattern_05_focused_v3.png?_v=671444c5f47705cce40d8aefd23df3b1","header_image_scaled":"https://secure.assets.tumblr.com/images/default_header/optica_pattern_05_focused_v3.png?_v=671444c5f47705cce40d8aefd23df3b1","header_stretch":true,"link_color":"#529ECC","show_avatar":true,"show_description":true,"show_header_image":true,"show_title":true,"title_color":"#444444","title_font":"Gibson","title_font_weight":"bold"}},"post":{"id":"29063747477"},"content_raw":"<p><h2>tl;dr: If you use timestamps on your deploys, make sure they don’t contain colons or anything using <code>make</code> will explode.</h2>\n\n<p>We were running into this error while running <code>bundle install</code> on Ubuntu:</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb \nchecking for ffi.h... no\nchecking for ffi.h in /usr/local/include... no\nchecking for rb_thread_blocking_region()... yes\nchecking for ruby_native_thread_p()... yes\nchecking for rb_thread_call_with_gvl()... yes\ncreating extconf.h\ncreating Makefile\n\nmake\nMakefile:158: *** target pattern contains no `%'.  Stop.\n</code></pre>\n\n<p>The confusing part was when we ran <code>gem install ffi</code> it ran without a problem.\nGoogling around told us nothing about why ffi would be failing to build.</p>\n\n<p>We had run across <a href=\"http://lists.trolltech.com/qt-interest/2005-02/thread01024-0.html\" target=\"_blank\">a post about QT</a> where a similar error was encountered.</p>\n\n<p>Then I found a <a href=\"http://stackoverflow.com/questions/2052406/escaping-colons-in-filenames-in-a-makefile\" target=\"_blank\">StackOverflow question</a> which references <a href=\"http://www.mail-archive.com/bug-make@gnu.org/msg03318.html\" target=\"_blank\">a GNU mailing list thread</a> that explains the complete impossibility of <code>make</code> being able to parse a Makefile containing colons.</p>\n\n<p>It turns out we <em>did</em> have colons in the filename: We were using %T in the timestamps on our integration server, thus <code>make</code> was choking.</p>\n\n<p>The fix was simple, we just replaced the %T with a non-colon-delimited time string and everything worked just fine.</p>\n\n<p>Done!</p>\n\n<p>:A</p></p>","content":"<p><h2>tl;dr: If you use timestamps on your deploys, make sure they don’t contain colons or anything using <code>make</code> will explode.</h2>\n\n<p>We were running into this error while running <code>bundle install</code> on Ubuntu:</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb \nchecking for ffi.h... no\nchecking for ffi.h in /usr/local/include... no\nchecking for rb_thread_blocking_region()... yes\nchecking for ruby_native_thread_p()... yes\nchecking for rb_thread_call_with_gvl()... yes\ncreating extconf.h\ncreating Makefile\n\nmake\nMakefile:158: *** target pattern contains no `%'.  Stop.\n</code></pre>\n\n<p>The confusing part was when we ran <code>gem install ffi</code> it ran without a problem.\nGoogling around told us nothing about why ffi would be failing to build.</p>\n\n<p>We had run across <a href=\"http://lists.trolltech.com/qt-interest/2005-02/thread01024-0.html\" target=\"_blank\">a post about QT</a> where a similar error was encountered.</p>\n\n<p>Then I found a <a href=\"http://stackoverflow.com/questions/2052406/escaping-colons-in-filenames-in-a-makefile\" target=\"_blank\">StackOverflow question</a> which references <a href=\"http://www.mail-archive.com/bug-make@gnu.org/msg03318.html\" target=\"_blank\">a GNU mailing list thread</a> that explains the complete impossibility of <code>make</code> being able to parse a Makefile containing colons.</p>\n\n<p>It turns out we <em>did</em> have colons in the filename: We were using %T in the timestamps on our integration server, thus <code>make</code> was choking.</p>\n\n<p>The fix was simple, we just replaced the %T with a non-colon-delimited time string and everything worked just fine.</p>\n\n<p>Done!</p>\n\n<p>:A</p></p>","is_current_item":true,"is_root_item":true}]}
date: 2012-08-09
---

# Make, Colons, and Paths: A Journey Through Hell

<aside>tl;dr: If you use timestamps on your deploys, make sure they don&rsquo;t contain colons or <code>make</code> will explode. Including Ruby extensions.</aside>

<p>We were running into this error while running <code>bundle install</code> on Ubuntu:</p>

<pre><code>/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for ffi.h... no
checking for ffi.h in /usr/local/include... no
checking for rb_thread_blocking_region()... yes
checking for ruby_native_thread_p()... yes
checking for rb_thread_call_with_gvl()... yes
creating extconf.h
creating Makefile

make
Makefile:158: *** target pattern contains no `%'.  Stop.
</code></pre>

<p>The confusing part was when we ran <code>gem install ffi</code> it ran without a problem.
Googling around told us nothing about why ffi would be failing to build.</p>

<p>We had run across <a href="http://lists.trolltech.com/qt-interest/2005-02/thread01024-0.html" target="_blank">a post about QT</a> where a similar error was encountered.</p>

<p>Then I found a <a href="http://stackoverflow.com/questions/2052406/escaping-colons-in-filenames-in-a-makefile" target="_blank">StackOverflow question</a> which references <a href="http://www.mail-archive.com/bug-make@gnu.org/msg03318.html" target="_blank">a GNU mailing list thread</a> that explains the complete impossibility of <code>make</code> being able to parse a Makefile containing colons.</p>

<p>It turns out we <em>did</em> have colons in the filename: We were using %T in the timestamps on our integration server, thus <code>make</code> was choking.</p>

<p>The fix was simple, we just replaced the %T with a non-colon-delimited time string and everything worked just fine.</p>

<p>Done!</p>

<p>:A</p>
